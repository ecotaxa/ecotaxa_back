
with mv(ifrm, ito, fto) as (values(185400000,185400005,'18540/0005.jpg'),
                                  (186510000,186511364,'18651/1364.jpg'),
                                  (186710000,186711630,'18671/1630.jpg'),
                                  (186850000,186850392,'18685/0392.jpg'))
update images
set imgid = mv.ito, file_name=mv.fto
from mv
where imgid = ifrm;

-- To do on vault FS:
-- mv 18540/0000.jpg 18540/0005.jpg
-- mv 18651/0000.jpg 18651/1364.jpg
-- mv 18671/0000.jpg 18671/1630.jpg
-- mv 18685/0000.jpg 18685/0392.jpg

with tbl(img) as (values
      (182970000), (183260000), (183300000), (183310000), (183320000), (183380000), (183390000), (183400000), (183410000), (183420000),
       (183430000), (183440000), (183450000), (183460000), (183470000), (183480000), (183490000), (183500000), (183510000), (183520000),
       (183530000), (183540000), (183550000), (183560000), (183570000), (183580000), (183590000), (183600000), (183610000), (183620000),
       (183630000), (183640000), (183650000), (183660000), (183670000), (183680000), (183690000), (183700000), (183710000), (183720000),
       (183730000), (183740000), (183750000), (183760000), (183770000), (183780000), (183790000), (183800000), (183810000), (183820000),
       (183830000), (183840000), (183850000), (183860000), (183870000), (183880000), (183890000), (183900000), (183910000), (183920000),
       (183930000), (183940000), (183950000), (183960000), (183970000), (183980000), (183990000), (184000000), (184010000), (184020000),
       (184030000), (184040000), (184060000), (184070000), (184080000), (184090000), (184100000), (184110000), (184120000), (184130000),
       (184140000), (184150000), (184160000), (184170000), (184180000), (184190000), (184200000), (184210000), (184220000), (184230000),
       (184240000), (184250000), (184260000), (184270000), (184280000), (184290000), (184300000), (184310000), (184320000), (184330000),
       (184340000), (184350000), (184360000), (184370000), (184380000), (184390000), (184400000), (184410000), (184420000), (184430000),
       (184440000), (184450000), (184460000), (184470000), (184480000), (184490000), (184500000), (184510000), (184520000), (184530000),
       (184540000), (184550000), (184560000), (184570000), (184580000), (184590000), (184600000), (184610000), (184620000), (184630000),
       (184640000), (184650000), (184660000), (184670000), (184680000), (184690000), (184700000), (184710000), (184720000), (184730000),
       (184740000), (184750000), (184760000), (184770000), (184780000), (184790000), (184800000), (184810000), (184820000), (184830000),
       (184840000), (184850000), (184860000), (184870000), (184880000), (184890000), (184900000), (184910000), (184920000), (184930000),
       (184940000),
       (185410000),
           (185420000),       (186520000),       (186530000),
       (186540000), (186550000),
       (186560000), (186570000), (186580000),
       (186590000), (186600000), (186610000), (186620000), (186630000), (186640000), (186650000), (186660000), (186670000), (186680000),
       (186690000), (186700000), (186720000), (186730000), (186740000), (186750000), (186760000), (186770000), (186780000), (186790000),
       (186800000), (186810000), (186820000), (186830000), (186840000), (186860000), (186870000), (186880000), (186890000), (186900000),
       (186910000), (186920000), (186930000), (186940000), (186950000), (186960000), (186970000), (186980000), (186990000), (187000000),
       (187010000), (187020000), (187030000), (187040000), (187050000), (187060000), (187070000), (187080000), (187090000), (187100000),
       (187110000), (187120000), (187130000), (187140000), (187150000), (187160000), (187170000), (187180000), (187190000), (187200000),
       (187210000), (187220000), (187230000), (187240000), (187250000), (187260000), (187270000), (187280000),
                 (-1) )
update images
set imgid = tbl.img - 10000
from tbl
where imgid = img;

-- Sanity check should return nothing
select (case when imgid<10000000 THEN lpad((imgid/10000)::text,4,'0') ELSE (imgid/10000)::text end)||'/'||lpad((imgid%10000)::text,4,'0'),* from images where not starts_with(file_name,(case when imgid<10000000 THEN lpad((imgid/10000)::text,4,'0') ELSE (imgid/10000)::text end)||'/'||lpad((imgid%10000)::text,4,'0')) order by objid limit 1000;